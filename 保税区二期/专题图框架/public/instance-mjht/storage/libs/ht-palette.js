!function(m,r,s){"use strict";var u="px",l="0",k="innerHTML",_="className",B=ht.Default,t=ht.Color,E=ht.Node,p="position",z="top",L="left",h=B.animate,X=B.getInternal(),n="width",l="0",q="none",j="max-height",S="font",x="background",W="border-box",P="user-select",y="box-sizing",T="overflow",F=B.isTouchable,X=B.getInternal(),a=t.titleIconBackground,v=B.scrollBarInteractiveSize,U=/msie 9/.test(m.navigator?m.navigator.userAgent.toLowerCase():""),Y=null,e=function(){return document},C=function(V){return e().createElement(V)},w=function(){return C("div")},V=function(){var h=w(),k=h.style;return k.msTouchAction=q,k.cursor="default",F&&k.setProperty("-webkit-tap-highlight-color","rgba(0, 0, 0, 0)",Y),k.position="absolute",k.left=l,k.top=l,h},H=function(){return C("canvas")},d=function(){return document.body},A=function(m,v,r){m.style.setProperty(v,r,Y)},J=function(Z,Y){Z.style.removeProperty(Y)},O=function(G,Y,i){B.def(ht.widget[G],Y,i)},o=function(U,n){U.appendChild(n)},i=function(w,k){w.removeChild(k)},D=function(Z,R,e,I){Z.addEventListener(R,e,!!I)};X.addMethod(B,{paletteExpandIcon:{width:16,height:16,comps:[{type:"triangle",rect:[4,4,10,8],background:a,rotation:3.14}]},paletteCollapseIcon:{width:16,height:16,comps:[{type:"triangle",rect:[4,4,10,8],background:a}]},paletteTitleLabelColor:B.labelSelectColor,paletteTitleLabelFont:B.labelFont,paletteContentLabelFont:B.labelFont,paletteContentLabelColor:"#777",paletteContentBackground:"#fff",paletteTitleHeight:B.widgetTitleHeight,paletteTitleBackground:t.titleBackground,paletteTitleHoverBackground:t.titleBackground,paletteSeparatorWidth:1,paletteSeparatorColor:s,paletteItemHoverBorderColor:t.highlight,paletteItemSelectBackground:t.highlight},!0);var R=".palette-item:hover{border: 1px solid "+B.paletteItemHoverBorderColor+" !important}"+" .palette-header:hover{background: "+B.paletteTitleHoverBackground+" !important}",f=document.createElement("style");F||(f.styleSheet?f.styleSheet.cssText=R:f.appendChild(e().createTextNode(R))),e().getElementsByTagName("head")[0].appendChild(f);var g=function(g){var R=this;R.$22h=g,R.addListeners()};B.def(g,r,{ms_listener:1,getView:function(){return this.$22h.getView()},$26h:function(){var C=this;C.$36h&&d().removeChild(C.$36h),C.$23h=C.$24h=C.$25h=C.$35h=C.$36h=Y},handle_touchstart:function(Y){for(var D,L=this,S=L.$22h,U=Y.target,M=S.sm(),k=S.dm(),f="palette-header",d="palette-header-tool",A="palette-item",t=!1,s=!1,v=!1;U&&(U[_]||"").indexOf(f)<0&&(U[_]||"").indexOf(A)<0;)U=U.parentNode;if(U&&U[_].indexOf(d)>=0?t=!0:U&&U[_].indexOf(f)>=0?v=!0:U&&U[_].indexOf(A)>=0&&(s=!0),B.isLeftButton(Y))if(L.$27h(Y))L.$24h=B.getClientPoint(Y),L.$25h=S.ty();else if(t){B.preventDefault(Y),D=U.parentNode.$11h;var g=k.getDataById(D),G=g.s("tools")[U.toolIndex];G.action&&G.action.call(S)}else if(v){B.preventDefault(Y),D=U.$11h;var g=k.getDataById(D);g.isExpanded()?g.setExpanded(!1):g.setExpanded(!0)}else if(s){D=U.$11h;var y=k.getDataById(D);M.ss(y),S.handleDragAndDrop&&(B.preventDefault(Y),y.s("draggable")&&(S.handleDragAndDrop(Y,"prepare"),L.$35h=0)),y.s("draggable")||(B.preventDefault(Y),L.$24h=B.getClientPoint(Y),L.$25h=S.ty())}else B.preventDefault(Y),L.$24h=B.getClientPoint(Y),L.$25h=S.ty();else L.$26h(Y)},handle_mousedown:function(o){this.handle_touchstart(o)},handle_mousewheel:function(D){this.handleScroll(D,D.wheelDelta/40,D.wheelDelta!==D.wheelDeltaX)},handle_DOMMouseScroll:function(p){this.handleScroll(p,-p.detail,1)},handleScroll:function($,S,j){var r=this.$22h;B.preventDefault($),j&&r._41o()&&r.ty(r.ty()+20*S)},handle_mouseup:function(x){this.handle_touchend(x)},handle_touchend:function(o){var x=this;x.$37h(o),x.$26h(o)},handleWindowMouseUp:function(c){this.handleWindowTouchEnd(c)},handleWindowTouchEnd:function(E){var P=this;P.$37h(E),P.$26h(E)},$37h:function(q){var M=this,i=M.$22h;2===M.$35h&&(M.$35h=3,i.handleDragAndDrop(q,"end"))},handleWindowMouseMove:function(N){this.handleWindowTouchMove(N)},handleWindowTouchMove:function(e){var V=this,i=V.$22h,b=V.$23h,X=V.$24h,m=V.$25h,G=B.getClientPoint(e),J=i._29I,h=V.$36h;if(1===V.$35h||2===V.$35h){if(V.$35h=2,i.handleDragAndDrop(e,"between"),F){var n=e.touches[0];e=n?n:e.changedTouches[0]}h.style.left=e.pageX-parseInt(h.width)/2+u,h.style.top=e.pageY-parseInt(h.height)/2+u}else"p"===b?i.ty(m+G.y-X.y):"v"===b&&i.ty(m+(X.y-G.y)/J.height*i._59I)},handle_mousemove:function(r){this.handle_touchmove(r)},handle_touchmove:function(K){if(!B.isDragging()&&B.isLeftButton(K)){var Y=this,c=Y.$22h,t=Y.$27h(K);if(Y.$24h){if(!Y.$23h){if(B.getDistance(B.getClientPoint(K),Y.$24h)<2)return;Y.$23h=t?"v":"p",B.startDragging(Y)}}else if(t)c._43o();else if(0===Y.$35h){if(Y.$35h=1,c.handleDragAndDrop(K,"begin"),F){var q=K.touches[0];K=q?q:K.changedTouches[0]}var E=Y.$36h=new Image,i=c.$10h[c.sm().ld().getId()].querySelector(".image-box"),M=parseInt(i.style.width),O=parseInt(i.style.height);E.draggable=!1,E.src=i.toDataURL(),E.width=M,E.height=O,E.style.position="absolute",E.style.left=K.pageX-M/2+u,E.style.top=K.pageY-O/2+u,d().appendChild(E),B.startDragging(Y)}}},$27h:function(L){var H=this.$22h,R=H.getView(),l=R.getBoundingClientRect(),m=H._29I,$=L.clientX-l.left+R.scrollLeft;return H._41o()&&m.x+m.width-$<v}}),ht.widget.Palette=function(Y){var K=this,F=K._view=X.createView(null,K);K.$9h={},K.$10h={},K.$4h={},K._29I={x:0,y:0,width:0,height:0},K._59I=0,K.dm(Y?Y:new ht.DataModel),F[_]="ht-widget-palette",K.$29h=new g(K),A(F,x,B.paletteContentBackground),A(F,T,"auto"),A(F,y,W),A(F,"-moz-"+y,W),A(F,"-webkit-"+P,q),A(F,"-moz-"+P,q),A(F,"-ms-"+P,q),A(F,P,q),A(F,"position","absolute"),A(F,"overflow","hidden"),o(F,K._79O=V()),D(F,"dragstart",function(R){R.dataTransfer&&(R.dataTransfer.setData("Text","nodeid:"+R.target.$11h),R.dataTransfer.effectAllowed="all",K.$29h.$26h())})},O("Palette",r,{ms_v:1,ms_fire:1,ms_dm:1,ms_sm:1,ms_vs:1,ms_ac:["itemImageWidth","itemImageHeight","itemImagePadding","itemMargin","layout","autoHideScrollBar","scrollBarSize","scrollBarColor"],$30h:0,_itemImagePadding:4,_itemImageWidth:70,_itemImageHeight:50,_itemMargin:10,_layout:"largeicons",_autoHideScrollBar:B.autoHideScrollBar,_scrollBarSize:B.scrollBarSize,_scrollBarColor:B.scrollBarColor,getViewRect:function(){return this._29I},ty:function(G){return G==Y?this.getTranslateY():(this.setTranslateY(G),void 0)},setTranslateY:function(C){if(this.$32h==Y){var $=this,A=$.$33h(C),K=$.$30h;$.$30h=A,$.fp("translateY",K,A)}},getTranslateY:function(){return this.$30h},setLayout:function(U){var v,_,m=this,K=m._layout;m._layout=U,"smallicons"===U?v=_=20:"iconsonly"===U?v=_=50:(v=70,_=50),m.setItemImageWidth(v),m.setItemImageHeight(_),m.setItemImagePadding(4),m.fp("layout",K,U)},getDataAt:function(W){for(var e=W.target;e&&e.$11h==Y;)e=e.parentNode;return e&&e.$11h!=Y?this.getDataModel().getDataById(e.$11h):void 0},$20h:function(){var S=16;return F&&(S*=1.2),S},$19h:function(){return B.paletteTitleHeight},$18h:function(){var W=B.paletteSeparatorWidth,U=B.paletteTitleBackground,z=B.paletteSeparatorColor||B.brighter(U);return W+u+" solid "+z},$17h:function(x){A(x,"cursor","pointer"),A(x,"display","inline-block"),A(x,"margin-right",(F?8:4)+u),A(x,"vertical-align",z)},$1h:function(j){var t=this,I=w(),U=w(),O=C("span");I[_]="palette-header",A(I,p,"relative"),A(I,x,B.paletteTitleBackground),A(I,"color",B.paletteTitleLabelColor),A(I,z,l),A(I,y,W),A(I,"-moz-"+y,W),A(I,"padding","0 5px 0 0"),A(I,"border-top",t.$18h()),A(I,n,"100%"),A(I,"cursor","pointer"),A(I,"white-space","nowrap"),A(I,T,"hidden"),A(I,S,B.paletteTitleLabelFont),A(I,"line-height",t.$19h()+u),I.$11h=j.getId();var Q=H(),q=t.$19h(),$=t.$20h();t.$17h(Q),X.setCanvas(Q,$,q),o(I,Q);var E=j.s("tools");if(E)for(var c=0;c<E.length;c++){var r=H();t.$17h(r),X.setCanvas(r,$,q),r[_]="palette-header-tool palette-header-tool"+j.getId()+"-"+c,r.style.position="absolute",r.style.right=($+10)*c+"px",r.toolIndex=c,o(I,r)}return Q[_]="palette-toggle-icon-"+j.getId(),U[_]="palette-content",A(U,"max-height",0+u),A(U,S,B.paletteContentLabelFont),A(U,T,"hidden"),U.$11h=j.getId(),t.$9h[j.getId()]=U,O[k]=j.getName(),A(O,S,B.paletteTitleLabelFont),o(I,Q),o(I,O),[I,U]},$2h:function(n){var F=this,Z=F._layout,R=U&&n.s("draggable")?C("a"):w(),P=H(),J=w(),x=n.getName()||"",Y=n.s("title")||n.getToolTip()||x,v=F._itemMargin;P[_]="image-box";var m=F.getItemImageWidth(),N=F.getItemImageHeight();return X.setCanvas(P,m,N),o(R,P),J[k]=x,J[_]="label-box","iconsonly"!==Z&&o(R,J),R[_]="palette-item",A(R,"vertical-align",z),A(R,"cursor","pointer"),A(R,"border-radius",5+u),A(R,"border","1px solid transparent"),A(R,"text-align","center"),A(R,"display","inline-block"),A(R,"margin-left",v+u),A(R,"margin-top",v+u),A(R,"color",B.paletteContentLabelColor),"smallicons"===Z?(A(P,"vertical-align","middle"),A(R,"margin-left",2+u),A(R,"margin-top",2+u),A(R,"padding",2+u),A(R,"text-align",L),A(J,"display","inline-block"),A(J,"min-width",F.$21h+F._itemMargin+u)):"largeicons"===Z&&(A(J,"max-width",m+u),A(J,"overflow","hidden")),R.$11h=n.getId(),Y&&(R.title=Y),n.s("draggable")&&!F.handleDragAndDrop&&(U?(R.href="#",A(R,"text-decoration",q)):R.draggable="true"),R},$16h:function(j,K,J,I){var V=X.initContext(j);X.translateAndScale(V,0,0,1),V.clearRect(0,0,J,J);var y=(J-I)/2;B.drawStretchImage(V,B.getImage(K),"fill",0,y,I,I),V.restore()},$15h:function(k){var x=this,o=k.getId(),X=x._view.querySelector(".palette-toggle-icon-"+o),G=k.isExpanded()?B.paletteCollapseIcon:B.paletteExpandIcon;if(X&&G){var h=x.$19h(),U=x.$20h();x.$16h(X,G,h,U)}},_drawToolsIcon:function(J){var B=this,i=J.s("tools");if(i)for(var L=0;L<i.length;L++){var k=B._view.querySelector(".palette-header-tool"+J.getId()+"-"+L),p=i[L].icon,V=B.$19h(),u=B.$20h();B.$16h(k,p,V,u)}},$14h:function(N){var t=this,p=N.getId(),k=t.$10h[p].querySelector(".image-box"),A=N.getImage(),H=N.s("image.stretch");if(k&&A){var c=X.initContext(k),i=t.getItemImagePadding();i="smallicons"===t._layout?i/2:i;var K=t.getItemImageWidth()-2*i,_=t.getItemImageHeight()-2*i;X.translateAndScale(c,0,0,1),c.clearRect(0,0,K,_),B.drawStretchImage(c,B.getImage(A),H,i,i,K,_,N,t),c.restore()}},validateImpl:function(){var y,p,R,z=this,N=z.$9h,O=z._layout,X=z.$10h,d=z.$4h,x=z._view,F=z.dm();if(z.$13h&&(delete z.$13h,d={},F.each(function(l){d[l.getId()]=l})),"smallicons"===O)for(var Z in d){var w=d[Z];if(w instanceof E){var f=w.getName()||"",m=B.getTextSize(B.paletteContentLabelFont,f).width;z.$21h!=Y&&z.$21h>m||(z.$21h=m)}}for(var Z in d){R=d[Z];var D,W;if(F.contains(R)){if(R instanceof ht.Group){var Q,c=z.$1h(R),b=X[R.getId()];b&&(Q=b.nextSibling,i(x,Q),i(x,b)),p=F.getSiblings(R).indexOf(R);var I=x.children[2*p]||z._79O;I&&I.parentNode?(x.insertBefore(c[0],I),x.insertBefore(Q||c[1],I)):(x.appendChild(c[0]),x.appendChild(Q||c[1])),X[R.getId()]=c[0],y=N[R.getId()]=Q||c[1],W=R.$12h;var $=R.s("promptText");W||(R.$12h=C("div"),R.$12h[k]=$||"",W=R.$12h),0===R.getChildren().size()?y.contains(W)||o(y,W):y.contains(W)&&i(y,W)}else if(D=R.getParent()){var K=z.$2h(R),S=X[R.getId()];y=N[D.getId()],S&&i(S.parentNode,S),p=F.getSiblings(R).indexOf(R);var g=y.children[p];g?y.insertBefore(K,g):o(y,K),X[R.getId()]=K,z.$14h(R)}}else{var e=X[R.getId()],A=e.parentNode;if(R instanceof ht.Group){var q=e.nextSibling;i(x,e),i(x,q),delete N[R.getId()]}else i(A,e),0===A.children.length&&(D=F.getDataById(A.$11h),W=D.$12h,W&&!A.contains(W)&&o(A,W));delete X[R.getId()]}}z.$4h={};var s=function(){var E=z._59I,e=0;z.$32h!=Y&&(clearInterval(z.$32h),e=0,delete z.$32h),z.$32h=setInterval(function(){z.$31h(),E===z._59I?(e++,e>=2&&(clearInterval(z.$32h),delete z.$32h)):(e=0,E=z._59I)},30)};for(var G in N)if(y=N[G],R=F.getDataById(N[G].$11h),z.$15h(R),z._drawToolsIcon(R),R.isExpanded()){if(y.style.maxHeight===0+u){var H=y.scrollHeight+z._itemMargin+u;h(y).duration(200).set(j,H).set("padding-bottom",z._itemMargin+u).end(function(){return function(){s()}}(H))}else y.style.maxHeight=y.scrollHeight+u;y.style.paddingBottom=z._itemMargin+u}else y.style.maxHeight!==0+u&&h(y).duration(200).set(j,l).set("padding-bottom",l).end(function(){return function(){s()}}(y));z.$28h(),z.$31h()},$31h:function(){for(var $=this,_=$._view,m=0,I=_.children,h=0;h<I.length;h++){var M=I[h];M.className&&M.className.indexOf("palette-")>=0&&(m+=M.offsetHeight)}$._59I=m,$.$30h=$.$33h($.ty());var b=$.ty();_.scrollTop=-b,$._29I={x:0,y:-b,width:_.clientWidth,height:_.clientHeight},A($._79O,z,-b+u),$._93I()},$33h:function(I){var q=this,Q=q._29I.height-q._59I;return Q>I&&(I=Q),I>0?0:Math.round(I)},redraw:function(){this.$13h||(this.$13h=1,this.iv())},onPropertyChanged:function(z){["autoHideScrollBar","scrollBarSize","scrollBarColor","translateY"].indexOf(z.property)<0&&this.redraw(),"translateY"===z.property&&(this.iv(),this._43o())},findDataByName:function(f){for(var C=this.dm().getDatas(),o=0;o<C.size();o++){var R=C.get(o);if(R.getName()===f)return R}},setDataModel:function(M){var G=this,B=G._dataModel,J=G._selectionModel;B!==M&&(B&&(B.umm(G.$6h,G),B.umd(G.$8h,G),B.umh(G.$7h,G),J||B.sm().ums(G.$28h,G)),G._dataModel=M,M.mm(G.$6h,G),M.md(G.$8h,G),M.mh(G.$7h,G),J?J._21I(M):M.sm().ms(G.$28h,G),G.sm().setSelectionMode("single"),G.fp("dataModel",B,M))},$6h:function(q){var Y=this,u=Y._view,I=q.data,b=Y.$4h;"add"===q.kind?b[I.getId()]=I:"remove"===q.kind?b[I.getId()]=I:"clear"===q.kind&&(Y.$10h={},Y.$9h={},Y.$4h={},u[k]=""),Y.iv()},$7h:function(x){var q=this,k=x.data;q.$4h[k.getId()]=k,q.iv()},$8h:function(V){var z=this,p=V.data,A=V.property;"expanded"===A?z.iv():(z.$4h[p.getId()]=p,z.iv())},$28h:function(){var P,I=this,m=I.sm(),b="palette-item",d=m.ld();this.dm().each(function(n){P=I.$10h[n.getId()],P&&P[_].indexOf(b)>=0&&(n===d?A(P,x,B.paletteItemSelectBackground):J(P,x))})}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);