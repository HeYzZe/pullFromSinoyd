!function(x,z){"use strict";var u="ht",O=x[u],L="innerHTML",r="className",n=null,J="px",k=O.Default,y=k.getInternal(),o="0",U=function(){return document},_=function(q){return U().createElement(q)},A=function(){return _("canvas")},d=function(w,J,X){w.style.setProperty(J,X,n)},w=function(_,u,H){k.def(O.widget[_],u,H)},p=function(g,d){g.appendChild(d)},j=function(Y,d){Y.removeChild(d)},q=function(p,A,_,V){p.addEventListener(A,_,!!V)},h=function(x,a,e,j){x.removeEventListener(a,e,!!j)},s=k.isTouchable;y.addMethod(k,{menuLabelFont:(s?"16":"13")+"px arial, sans-serif",menuLabelColor:"#000",menuBackground:"#F0EFEE",menuHoverBackground:"#648BFE",menuHoverLabelColor:"#fff",menuSeparatorWidth:1,menuSeparatorColor:"#999"},!0),O.widget.Menu=function(M){var j=this,b=j._view=y.createView(null,j),g=j.$1g=new O.widget.ContextMenu,D=_("ul");g._r=!0,g._view[r]+=" ht-widget-dropdownmenu",b[r]="ht-widget-menu",D[r]="header",d(b,"margin",o),d(b,"padding",o),d(b,"background",k.menuBackground),d(b,"-webkit-user-select","none"),d(b,"-moz-user-select","none"),d(b,"user-select","none"),d(b,"text-align","left"),d(b,"border-bottom",k.menuSeparatorWidth+"px solid "+k.menuSeparatorColor),d(b,"cursor","default"),d(b,"overflow","auto"),d(b,"white-space","nowrap"),d(b,"font",k.menuLabelFont),d(b,"color",k.menuLabelColor),d(b,"box-sizing","border-box"),d(b,"-moz-box-sizing","border-box"),d(D,"list-style","none"),d(D,"margin",o),d(D,"padding",o),d(D,"display","inline-block"),p(b,D),j.setItems(M),j.$2g=function(m){j.$3g(m)},j.$4g=function(H){j.$5g(H)},j.$6g=function(c){j.$7g(c)},j.$8g=function(f){j.$9g(f)},j.$9b=function(t){j.$10g(t)},j._autoShow=!0,j.setAutoShow(!1),g.afterHide=function(){j.$11g()},g.afterShow=function(){j.$12g()},h(U(),"keydown",g.$3b),j.$3b=function(k){j.$13g(k)},j.invalidate()},w("Menu",z,{_items:n,$14g:k.menuHoverBackground,$15g:k.menuHoverLabelColor,$16g:{},_enableGlobalKey:!1,ms_v:1,$21g:"smallicons",$22g:0,$23g:0,$24g:"left",getDropDownMenu:function(){return this.$1g},setLayout:function(N){var M=this;if(M.$21g=N,M.setItems(M._items),"largeicons"===N){for(var v=M._view.querySelectorAll(".header-item"),D=0,u=0;u<v.length;u++){var x=v[u];D=Math.max(D,x.clientWidth)}for(var u=0;u<v.length;u++){var x=v[u];d(x,"min-width",D+J)}}this.invalidate()},getLayout:function(){return this.$21g},setHeaderItemHGap:function(C){this.$22g=C;for(var v=this._view.querySelectorAll(".header-item"),T=0;T<v.length;T++){var R=v[T];d(R,"margin-left",C+J),d(R,"margin-right",C+J)}},getHeaderItemHGap:function(){return this.$22g},setHeaderItemVGap:function(Y){this.$23g=Y;for(var D=this._view.querySelectorAll(".header-item"),A=0;A<D.length;A++){var B=D[A];d(B,"margin-top",Y+J),d(B,"margin-bottom",Y+J)}},getHeaderItemVGap:function(){return this.$24g},setHeaderItemAlign:function(D){this.$24g=D,d(this._view,"text-align",D)},getHeaderItemAlign:function(){return this.$23g},enableGlobalKey:function(){var H=this,K=H._enableGlobalKey;K===!1&&(q(U(),"keydown",H.$3b),H._enableGlobalKey=!0)},disableGlobalKey:function(){this._enableGlobalKey=!1,h(U(),"keydown",this.$3b)},setHoverBackground:function(z){this.$14g=z},setHoverColor:function(U){this.$15g=U},setItems:function(x){var N=this,G=N._view,H=N.$21g;if(N._items=x,G.children[0][L]="",N.$16g={},x&&x.length){for(var h=G.children[0],c=0,b=U().createDocumentFragment();c<x.length;c++){var M=x[c],Z=_("li"),P=_("span");if(M.icon){var D=A();D[r]="menu-item-icon","smallicons"===H?(d(D,"height","1.2em"),d(D,"width","1.2em"),d(D,"vertical-align","middle")):(d(D,"height","32px"),d(D,"width","32px"),d(D,"display","block"),d(D,"margin","0 auto")),D.$20g=M.icon,p(Z,D)}Z[r]="header-item",d(Z,"display","inline-block"),d(Z,"vertical-align","top"),d(Z,"padding","0 1.2em"),d(Z,"line-height","1.8em"),"largeicons"===H&&d(Z,"text-align","center"),d(Z,"background-color","rgba(0,0,0,0)"),Z.setAttribute("data-index",c),N.$16g[c]=M.items,P[L]=M.label,"iconsonly"!==H&&p(Z,P),p(b,Z)}p(h,b)}},showDropdownMenu:function(b){var m=this,$=m.$16g[b],j=m.$1g,n=m._view.children[0].children[b],Y=m.$17g;if(n&&n!==Y){Y&&m.hideDropdownMenu();var i=n.getBoundingClientRect(),B=k.getWindowInfo();m.$17g=n,j.setItems($),j.show(i.left+B.left,i.top+i.height+B.top,!1)}},hideDropdownMenu:function(){this.$1g.hide()},getItemByProperty:function(U,l){var r=this,$=r._items;return $&&0!==$.length?r.$1g.getItemByProperty(U,l,$):n},$12g:function(){var T=this,E=T.$17g;E.style.background=T.$14g,E.style.color=T.$15g,T._autoShow||q(U(),s?"touchstart":"mousedown",T.$9b)},$11g:function(){var R=this,i=R.$17g;i&&(i.style.background="",i.style.color="",R.$17g=n),h(U(),s?"touchstart":"mousedown",R.$9b)},$10g:function(h){var Q=this,r=Q._view,O=Q.$1g,s=r.children[0];!U().body.contains(r)||s.contains(h.target)||O._view.contains(h.target)||Q.hideDropdownMenu()},$13g:function(n){var $=this,f=$.$1g;U().body.contains($._view)&&f.$13b.$4b.call(f.$13b,n,$._items)},setAutoShow:function(B){var g=this,o=g.$1g,u=g._view;g._autoShow!==B&&(g._autoShow?(h(u,"mouseover",g.$2g),h(u,"mouseout",g.$4g),h(o._view,"mouseout",g.$4g),s||(q(u,"mouseover",g.$8g),q(u,"mouseout",g.$8g)),q(u,s?"touchstart":"mousedown",g.$6g)):(h(u,"mouseover",g.$8g),h(u,"mouseout",g.$8g),h(u,s?"touchstart":"mousedown",g.$6g),h(U(),s?"touchstart":"mousedown",g.$9b),s||(q(u,"mouseover",g.$2g),q(u,"mouseout",g.$4g),q(o._view,"mouseout",g.$4g))),g._autoShow=B)},$3g:function(U){var o=this,A=o._view.children[0],m=U.target;if(A!==m&&A.contains(m)){for(;"header-item"!==m[r];)m=m.parentNode;o.showDropdownMenu(m.getAttribute("data-index"))}},$5g:function(d){var m=this,c=m._view.children[0],j=m.$1g,V=d.target,s=d.relatedTarget;!c.contains(V)&&!j._view.contains(V)||c.contains(s)||j._view.contains(s)||m.hideDropdownMenu()},$7g:function(J){J.preventDefault();var j=this,T=j._view.children[0],Y=j.$1g,x=J.target;if(k.isLeftButton(J)&&T!==x&&T.contains(x))if(s){for(;"header-item"!==x[r];)x=x.parentNode;var u=x.getAttribute("data-index"),Y=j.$1g,X=j._view.children[0].children[u],Q=j.$17g;Y.isShowing()&&j.hideDropdownMenu(),X!==Q&&j.showDropdownMenu(u)}else if(Y.isShowing())j.hideDropdownMenu();else{for(;"header-item"!==x[r];)x=x.parentNode;j.showDropdownMenu(x.getAttribute("data-index"))}},$9g:function(M){var e=this,U=e._view,P=e.$1g,i=M.target;if(U.contains(i)){for(var l=U.querySelectorAll(".header-item"),G=n,t=0;t<l.length;t++){var X=l[t];X.style.background="",X.style.color="","mouseover"===M.type?X.contains(i)&&(G=X):"mouseout"===M.type&&P.isShowing()&&e.$17g===X&&(G=X)}P.isShowing()&&(G||(G=e.$17g),e.showDropdownMenu(G.getAttribute("data-index"))),G&&(G.style.background=e.$14g,G.style.color=e.$15g)}},getShowingMenuIndex:function(){var s=this.$17g;return s?s.getAttribute("data-index"):-1},addTo:function(P){var e=this,A=e._view;p(P,A),e.invalidate()},dispose:function(){var M=this,i=M._view,p=M.$1g;i&&(M._autoShow?(h(i,"mouseover",M.$2g),h(i,"mouseout",M.$4g),h(p._view,"mouseout",M.$4g)):(h(i,"mouseover",M.$8g),h(i,"mouseout",M.$8g),h(i,s?"touchstart":"mousedown",M.$6g),h(U(),s?"touchstart":"mousedown",M.$9b)),h(U(),"keydown",M.$3b),p.dispose(),i.parentNode&&j(i.parentNode,i),M._view=M.$1g=M.$16g=M._items=M.$17g=M.$2g=M.$4g=M.$6g=M.$8g=M.$9b=M.$3b=n)},$19g:function(p,C,T,H){var $=y.initContext(p);y.translateAndScale($,0,0,1),$.clearRect(0,0,T,H),k.drawStretchImage($,k.getImage(C),"fill",0,0,T,H),$.restore()},validateImpl:function(){var C,c,u,_=this,r=_._view,z=r.querySelectorAll(".menu-item-icon");for(u=0;u<z.length;u++){var A=z[u];C=A.clientWidth,c=A.clientHeight,C&&c&&(y.setCanvas(A,C,c),_.$19g(A,k.getImage(A.$20g),C,c))}}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);