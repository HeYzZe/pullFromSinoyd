!function(M){"use strict";var W="ht",v=M[W],C=Math,l=C.max,j=C.min,w=C.abs,u=C.atan2,y=(C.cos,C.sin,C.ceil),F=v.Default,x=F.getInternal(),X=v.List,f=x.Mat,N=x.getNodeRect,o=x.intersectionLineRect,t=F.getDistance,O=F.setEdgeType,D="left",U="right",G="top",S="bottom",I="edge.type",Y="edge.gap",Q="edge.center",e="edge.extend",Z=function(t,j){return N(t,j).width},i=function(p,r){return N(p,r).height},J=function(f,W){return x.getEdgeAgentPosition(f,W._40I,W.s("edge.source.position"),W.s("edge.source.offset.x"),W.s("edge.source.offset.y"),W.s("edge.source.anchor.x"),W.s("edge.source.anchor.y"))},h=function(B,h){return x.getEdgeAgentPosition(B,h._41I,h.s("edge.target.position"),h.s("edge.target.offset.x"),h.s("edge.target.offset.y"),h.s("edge.target.anchor.x"),h.s("edge.target.anchor.y"))},b=function(f,x){var M=f.s(I),e=f.getEdgeGroup();if(e){var h=0;if(e.eachSiblingEdge(function(w){x.isVisible(w)&&w.s(I)==M&&h++}),h>1)return f.s(Y)*(h-1)/2}return 0},H=function(h,H){var t=h.s(I),V=h.isLooped();if(!h.getEdgeGroup())return V?h.s(Y):0;var o,$=0,n=0,g=0;return h.getEdgeGroup().getSiblings().each(function(O){O.each(function(c){if(c._40I===h._40I&&c.s(I)==t&&H.isVisible(c)){var i=c.s(Y);o?(n+=g/2+i/2,g=i):(o=c,g=i),c===h&&($=n)}})}),V?n-$+g:$-n/2},g=function(t,r){var u=r.s("edge.corner.radius");return F.toRoundedCorner(t,u)};x.addMethod(v.Style,{"edge.ripple.elevation":-20,"edge.ripple.size":1,"edge.ripple.both":!1,"edge.ripple.straight":!1,"edge.ripple.length":-1,"edge.corner.radius":-1,"edge.ortho":.5,"edge.flex":20,"edge.extend":20},!0),O("boundary",function(g,v,e,V){V||(v=-v);var Q,d=J(e,g),y=h(e,g),W=N(e,g._40I),_=N(e,g._41I),C=new f(u(y.y-d.y,y.x-d.x)),x=t(d,y),P=d.x,R=d.y;return Q=C.tf(0,v),d={x:Q.x+P,y:Q.y+R},Q=C.tf(x,v),y={x:Q.x+P,y:Q.y+R},Q=o(d,y,W),Q&&(d={x:Q[0],y:Q[1]}),Q=o(d,y,_),Q&&(y={x:Q[0],y:Q[1]}),{points:new X([d,y])}}),O("ripple",function(z,d,H,T){T||(d=-d);var n=J(H,z),q=h(H,z),_=t(n,q),e=j(z.s("edge.offset"),_/2),Y=z.s("edge.ripple.size"),s=z.s("edge.ripple.length"),M=z.s("edge.ripple.both"),B=z.s(Q),x=z.s("edge.ripple.elevation"),b=new X,c=z.s("edge.ripple.straight")?null:new X,K=new f(u(q.y-n.y,q.x-n.x));T||(x=-x),_-=2*e,s>0&&(Y=y(_/s));var o=_/Y;c&&c.add(1);for(var w=0;Y>w;w++)c&&c.add(3),0===w?b.add({x:e+o*w,y:B?0:d}):b.add({x:e+o*w,y:d}),b.add({x:e+o*w+o/2,y:x+d}),M&&(x=-x);for(b.add({x:e+_,y:B?0:d}),w=0;w<b.size();w++){var v=K.tf(b.get(w));v.x+=n.x,v.y+=n.y,b.set(w,v)}return{points:b,segments:c}}),O("h.v",function(R,_,V){_=H(R,V);var y=new X,E=R.s(Q),B=J(V,R),W=B.x,p=B.y,O=h(V,R),$=O.x,T=O.y,n=0,C=0,s=$-W,e=T-p;return E||(n=Z(V,R._40I)/2,C=i(V,R._41I)/2),s>=0&&0>=e?(y.add({x:W+n,y:p+_}),y.add({x:$+_,y:p+_}),y.add({x:$+_,y:T+C})):0>=s&&e>=0?(y.add({x:W-n,y:p+_}),y.add({x:$+_,y:p+_}),y.add({x:$+_,y:T-C})):s>=0&&e>=0?(y.add({x:W+n,y:p+_}),y.add({x:$-_,y:p+_}),y.add({x:$-_,y:T-C})):(y.add({x:W-n,y:p+_}),y.add({x:$-_,y:p+_}),y.add({x:$-_,y:T+C})),g(y,R)}),O("v.h",function(U,K,L){K=H(U,L);var M=new X,F=U.s(Q),c=J(L,U),B=c.x,y=c.y,E=h(L,U),A=E.x,b=E.y,m=0,u=0,d=A-B,D=b-y;return F||(m=Z(L,U._41I)/2,u=i(L,U._40I)/2),d>=0&&0>=D?(M.add({x:B+K,y:y-u}),M.add({x:B+K,y:b+K}),M.add({x:A-m,y:b+K})):0>=d&&D>=0?(M.add({x:B+K,y:y+u}),M.add({x:B+K,y:b+K}),M.add({x:A+m,y:b+K})):d>=0&&D>=0?(M.add({x:B-K,y:y+u}),M.add({x:B-K,y:b+K}),M.add({x:A-m,y:b+K})):(M.add({x:B-K,y:y-u}),M.add({x:B-K,y:b+K}),M.add({x:A+m,y:b+K})),g(M,U)}),O("ortho",function(e,s,C){var N=new X,d=e.s(Q),k=e.s("edge.ortho"),W=e._40I,P=e._41I,U=J(C,e),V=U.x,j=U.y,O=h(C,e),v=O.x,E=O.y,r=v-V,H=E-j,A=d?0:Z(C,W)/2,S=d?0:i(C,W)/2,$=d?0:Z(C,P)/2,m=d?0:i(C,P)/2,G=(r-(A+$)*(r>0?1:-1))*k,L=(H-(S+m)*(H>0?1:-1))*k;return w(r)<w(H)?r>=0&&0>=H?(N.add({x:V+s,y:j-S}),N.add({x:V+s,y:j+L+s-S}),N.add({x:v+s,y:j+L+s-S}),N.add({x:v+s,y:E+m})):0>=r&&H>=0?(N.add({x:V+s,y:j+S}),N.add({x:V+s,y:j+L+s+S}),N.add({x:v+s,y:j+L+s+S}),N.add({x:v+s,y:E-m})):r>=0&&H>=0?(N.add({x:V+s,y:j+S}),N.add({x:V+s,y:j+L-s+S}),N.add({x:v+s,y:j+L-s+S}),N.add({x:v+s,y:E-m})):(N.add({x:V+s,y:j-S}),N.add({x:V+s,y:j+L-s-S}),N.add({x:v+s,y:j+L-s-S}),N.add({x:v+s,y:E+m})):r>=0&&0>=H?(N.add({x:V+A,y:j+s}),N.add({x:V+G+s+A,y:j+s}),N.add({x:V+G+s+A,y:E+s}),N.add({x:v-$,y:E+s})):0>=r&&H>=0?(N.add({x:V-A,y:j+s}),N.add({x:V+G+s-A,y:j+s}),N.add({x:V+G+s-A,y:E+s}),N.add({x:v+$,y:E+s})):r>=0&&H>=0?(N.add({x:V+A,y:j+s}),N.add({x:V+G-s+A,y:j+s}),N.add({x:V+G-s+A,y:E+s}),N.add({x:v-$,y:E+s})):(N.add({x:V-A,y:j+s}),N.add({x:V+G-s-A,y:j+s}),N.add({x:V+G-s-A,y:E+s}),N.add({x:v+$,y:E+s})),g(N,e)}),O("flex",function(j,o,D){var p=new X,n=j.s("edge.flex")+b(j,D),O=j.s(Q),d=j._40I,m=j._41I,W=J(D,j),a=W.x,t=W.y,P=h(D,j),$=P.x,H=P.y,c=$-a,M=H-t,u=O?0:Z(D,d)/2,S=O?0:i(D,d)/2,N=O?0:Z(D,m)/2,s=O?0:i(D,m)/2,G=c>0?n:-n,q=M>0?n:-n;return w(c)<w(M)?c>=0&&0>=M?(p.add({x:a+o,y:t-S}),p.add({x:a+o,y:t+q+o-S}),p.add({x:$+o,y:H-q+o+s}),p.add({x:$+o,y:H+s})):0>=c&&M>=0?(p.add({x:a+o,y:t+S}),p.add({x:a+o,y:t+q+o+S}),p.add({x:$+o,y:H-q+o-s}),p.add({x:$+o,y:H-s})):c>=0&&M>=0?(p.add({x:a+o,y:t+S}),p.add({x:a+o,y:t+q-o+S}),p.add({x:$+o,y:H-q-o-s}),p.add({x:$+o,y:H-s})):(p.add({x:a+o,y:t-S}),p.add({x:a+o,y:t+q-o-S}),p.add({x:$+o,y:H-q-o+s}),p.add({x:$+o,y:H+s})):c>=0&&0>=M?(p.add({x:a+u,y:t+o}),p.add({x:a+G+o+u,y:t+o}),p.add({x:$-G+o-N,y:H+o}),p.add({x:$-N,y:H+o})):0>=c&&M>=0?(p.add({x:a-u,y:t+o}),p.add({x:a+G+o-u,y:t+o}),p.add({x:$-G+o+N,y:H+o}),p.add({x:$+N,y:H+o})):c>=0&&M>=0?(p.add({x:a+u,y:t+o}),p.add({x:a+G-o+u,y:t+o}),p.add({x:$-G-o-N,y:H+o}),p.add({x:$-N,y:H+o})):(p.add({x:a-u,y:t+o}),p.add({x:a+G-o-u,y:t+o}),p.add({x:$-G-o+N,y:H+o}),p.add({x:$+N,y:H+o})),g(p,j)}),O("extend.east",function(_,T,d){var c=new X,F=_.s(e)+b(_,d),s=_.s(Q),L=J(d,_),p=L.x+(s?0:Z(d,_._40I)/2),S=L.y,o=h(d,_),R=o.x+(s?0:Z(d,_._41I)/2),K=o.y,w=l(p,R)+F;return S>K?(c.add({x:p,y:S+T}),c.add({x:w+T,y:S+T}),c.add({x:w+T,y:K-T}),c.add({x:R,y:K-T})):(c.add({x:p,y:S-T}),c.add({x:w+T,y:S-T}),c.add({x:w+T,y:K+T}),c.add({x:R,y:K+T})),g(c,_)}),O("extend.west",function(F,N,S){var H=new X,O=F.s(e)+b(F,S),E=F.s(Q),f=J(S,F),l=f.x-(E?0:Z(S,F._40I)/2),K=f.y,C=h(S,F),I=C.x-(E?0:Z(S,F._41I)/2),i=C.y,B=j(l,I)-O;return K>i?(H.add({x:l,y:K+N}),H.add({x:B-N,y:K+N}),H.add({x:B-N,y:i-N}),H.add({x:I,y:i-N})):(H.add({x:l,y:K-N}),H.add({x:B-N,y:K-N}),H.add({x:B-N,y:i+N}),H.add({x:I,y:i+N})),g(H,F)}),O("extend.north",function(_,H,I){var p=new X,t=_.s(e)+b(_,I),R=_.s(Q),z=J(I,_),s=z.x,G=z.y-(R?0:i(I,_._40I)/2),K=h(I,_),$=K.x,L=K.y-(R?0:i(I,_._41I)/2),W=j(G,L)-t;return s>$?(p.add({y:G,x:s+H}),p.add({y:W-H,x:s+H}),p.add({y:W-H,x:$-H}),p.add({y:L,x:$-H})):(p.add({y:G,x:s-H}),p.add({y:W-H,x:s-H}),p.add({y:W-H,x:$+H}),p.add({y:L,x:$+H})),g(p,_)}),O("extend.south",function(m,S,I){var K=new X,c=m.s(e)+b(m,I),H=m.s(Q),p=J(I,m),V=p.x,r=p.y+(H?0:i(I,m._40I)/2),w=h(I,m),u=w.x,L=w.y+(H?0:i(I,m._41I)/2),D=l(r,L)+c;return V>u?(K.add({y:r,x:V+S}),K.add({y:D+S,x:V+S}),K.add({y:D+S,x:u-S}),K.add({y:L,x:u-S})):(K.add({y:r,x:V-S}),K.add({y:D+S,x:V-S}),K.add({y:D+S,x:u+S}),K.add({y:L,x:u+S})),g(K,m)});var T=function(r,i,C,I,L){if(I.sort(function(t,T){var o=t.getSourceAgent()===i?t.getTargetAgent():t.getSourceAgent(),k=T.getSourceAgent()===i?T.getTargetAgent():T.getSourceAgent(),b=o.p(),j=k.p();if(C===D||C===U){if(b.y>j.y)return 1;if(b.y<j.y)return-1}else{if(b.x>j.x)return 1;if(b.x<j.x)return-1}return F.sortFunc(t.getId(),T.getId())}),L){for(var Z,V,z,v=r.getSourceAgent(),T=r.getTargetAgent(),p=0;p<I.size();p++){var j=I.get(p);j.getSourceAgent()===v&&j.getTargetAgent()===T||j.getTargetAgent()===v&&j.getSourceAgent()===T?(V||(V=new X),V.add(j,0)):V?(z||(z=new X),z.add(j)):(Z||(Z=new X),Z.add(j))}I.clear(),Z&&I.addAll(Z),V&&I.addAll(V),z&&I.addAll(z)}var k=I.indexOf(r),R=I.size(),s=r.s(Y);return{side:C,index:k,size:R,offset:-s*(R-1)/2+s*k}},R=function($,d,k,G,v){var D=d.s(I);return T(d,k,G,k.getAgentEdges().toList(function(W){return $.isVisible(W)&&W.s(I)===D}),v)},m=function(N,o){var n=N.getSourceAgent()===o?N.getTargetAgent():N.getSourceAgent(),F=o.p(),m=n.p(),c=m.x-F.x,W=m.y-F.y;return c>0&&w(W)<=c?U:0>c&&w(W)<=-c?D:W>0&&w(c)<=W?S:G},z=function(Y,j,S){var N=j.s(I),_=m(j,S);return T(j,S,_,S.getAgentEdges().toList(function(E){return Y.isVisible(E)&&E.s(I)===N&&m(E,S)===_}))},q=function(n,x){var e=n.getSourceAgent()===x,I=e?n.getTargetAgent():n.getSourceAgent(),s=x.p(),A=I.p();return e?s.y>A.y?G:S:s.x<A.x?U:D},P=function(C,W,k){var L=W.s(I),M=q(W,k);return T(W,k,M,k.getAgentEdges().toList(function(z){return C.isVisible(z)&&z.s(I)===L&&q(z,k)===M}),M===U||M===S)},V=function(y,L){var u=y.getSourceAgent()===L,l=u?y.getTargetAgent():y.getSourceAgent(),Z=L.p(),C=l.p();return u?Z.x<C.x?U:D:Z.y>C.y?G:S},s=function(E,W,k){var d=W.s(I),t=V(W,k);return T(W,k,t,k.getAgentEdges().toList(function(c){return E.isVisible(c)&&c.s(I)===d&&V(c,k)===t}),t===U||t===S)},p=function(o,e,A){var N=o.getSourceAgent(),O=o.getTargetAgent(),c=N.getId()>O.getId(),z=c?O:N,h=c?N:O,s=z.p(),E=h.p(),H=A(e,o,z),d=A(e,o,h),k=o.s(Q),M=k?0:Z(e,z)/2,l=k?0:Z(e,h)/2,R=k?0:i(e,z)/2,f=k?0:i(e,h)/2,B=H.offset,m=d.offset,$=H.side,L=d.side,j=new X;return $===G?(j.add({x:s.x+B,y:s.y-R}),j.add({x:s.x+B,y:E.y+m}),L===D?j.add({x:E.x-l,y:E.y+m}):j.add({x:E.x+l,y:E.y+m})):$===S?(j.add({x:s.x+B,y:s.y+R}),j.add({x:s.x+B,y:E.y+m}),L===D?j.add({x:E.x-l,y:E.y+m}):j.add({x:E.x+l,y:E.y+m})):$===D?(j.add({x:s.x-M,y:s.y+B}),j.add({x:E.x+m,y:s.y+B}),L===S?j.add({x:E.x+m,y:E.y+f}):j.add({x:E.x+m,y:E.y-f})):$===U&&(j.add({x:s.x+M,y:s.y+B}),j.add({x:E.x+m,y:s.y+B}),L===S?j.add({x:E.x+m,y:E.y+f}):j.add({x:E.x+m,y:E.y-f})),c&&j.reverse(),g(j,o)};O("ortho2",function(m,b,J){var K,C,h=m.s(Q),x=m.s("edge.ortho"),v=m.getSourceAgent(),t=m.getTargetAgent(),B=v.getId()>t.getId(),L=B?t:v,q=B?v:t,d=L.p(),w=q.p(),j=z(J,m,L),o=z(J,m,q),P=h?0:Z(J,L)/2,F=h?0:i(J,L)/2,n=h?0:Z(J,q)/2,H=h?0:i(J,q)/2,p=new X,e=j.offset,V=o.offset,f=j.side;return f===U?(K=w.y>d.y?-e:e,C=d.x+P+(w.x-n-d.x-P)*x,p.add({x:d.x+P,y:d.y+e}),p.add({x:C+K,y:d.y+e}),p.add({x:C+K,y:w.y+V}),p.add({x:w.x-n,y:w.y+V})):f===D?(K=w.y>d.y?-e:e,C=d.x-P-(d.x-P-w.x-n)*x,p.add({x:d.x-P,y:d.y+e}),p.add({x:C-K,y:d.y+e}),p.add({x:C-K,y:w.y+V}),p.add({x:w.x+n,y:w.y+V})):f===S?(K=w.x>d.x?-e:e,C=d.y+F+(w.y-H-d.y-F)*x,p.add({x:d.x+e,y:d.y+F}),p.add({x:d.x+e,y:C+K}),p.add({x:w.x+V,y:C+K}),p.add({x:w.x+V,y:w.y-H})):f===G&&(K=w.x>d.x?-e:e,C=d.y-F-(d.y-F-w.y-H)*x,p.add({x:d.x+e,y:d.y-F}),p.add({x:d.x+e,y:C-K}),p.add({x:w.x+V,y:C-K}),p.add({x:w.x+V,y:w.y+H})),B&&p.reverse(),g(p,m)},!0),O("flex2",function(e,n,j){var h,b=e.getSourceAgent(),m=e.getTargetAgent(),R=b.getId()>m.getId(),r=R?m:b,o=R?b:m,N=r.p(),q=o.p(),p=z(j,e,r),P=z(j,e,o),v=e.s(Q),V=e.s("edge.flex")+(p.size-1)/2*e.s(Y),H=v?0:Z(j,r)/2,w=v?0:i(j,r)/2,E=v?0:Z(j,o)/2,$=v?0:i(j,o)/2,k=new X,l=p.offset,y=P.offset,d=p.side;return d===U?(h=q.y>N.y?-l:l,k.add({x:N.x+H,y:N.y+l}),k.add({x:N.x+H+V+h,y:N.y+l}),k.add({x:q.x-E-V+h,y:q.y+y}),k.add({x:q.x-E,y:q.y+y})):d===D?(h=q.y>N.y?-l:l,k.add({x:N.x-H,y:N.y+l}),k.add({x:N.x-H-V-h,y:N.y+l}),k.add({x:q.x+E+V-h,y:q.y+y}),k.add({x:q.x+E,y:q.y+y})):d===S?(h=q.x>N.x?-l:l,k.add({x:N.x+l,y:N.y+w}),k.add({x:N.x+l,y:N.y+w+V+h}),k.add({x:q.x+y,y:q.y-$-V+h}),k.add({x:q.x+y,y:q.y-$})):d===G&&(h=q.x>N.x?-l:l,k.add({x:N.x+l,y:N.y-w}),k.add({x:N.x+l,y:N.y-w-V-h}),k.add({x:q.x+y,y:q.y+$+V-h}),k.add({x:q.x+y,y:q.y+$})),R&&k.reverse(),g(k,e)},!0),O("extend.north2",function(p,K,T){var S=p.getSourceAgent(),J=p.getTargetAgent(),o=S.getId()>J.getId(),t=o?J:S,L=o?S:J,$=t.p(),d=L.p(),m=R(T,p,t,G),x=R(T,p,L,G,!0),l=p.s(Q),q=l?0:i(T,t)/2,O=l?0:i(T,L)/2,N=m.offset,z=x.offset,C=p.s(e)+(m.size-1)/2*p.s(Y),c=j($.y-q,d.y-O)-C+($.x<d.x?N:-N),E=new X;return E.add({x:$.x+N,y:$.y-q}),E.add({x:$.x+N,y:c}),E.add({x:d.x+z,y:c}),E.add({x:d.x+z,y:d.y-O}),o&&E.reverse(),g(E,p)},!0),O("extend.south2",function(u,O,U){var t=u.getSourceAgent(),V=u.getTargetAgent(),B=t.getId()>V.getId(),c=B?V:t,p=B?t:V,M=c.p(),o=p.p(),P=R(U,u,c,S),d=R(U,u,p,S,!0),C=u.s(Q),E=C?0:i(U,c)/2,m=C?0:i(U,p)/2,s=P.offset,n=d.offset,f=u.s(e)+(P.size-1)/2*u.s(Y),I=l(M.y+E,o.y+m)+f+(M.x>o.x?s:-s),k=new X;return k.add({x:M.x+s,y:M.y+E}),k.add({x:M.x+s,y:I}),k.add({x:o.x+n,y:I}),k.add({x:o.x+n,y:o.y+m}),B&&k.reverse(),g(k,u)},!0),O("extend.west2",function(y,k,z){var M=y.getSourceAgent(),w=y.getTargetAgent(),x=M.getId()>w.getId(),p=x?w:M,v=x?M:w,V=p.p(),N=v.p(),E=R(z,y,p,G),i=R(z,y,v,G,!0),W=y.s(Q),F=W?0:Z(z,p)/2,m=W?0:Z(z,v)/2,l=E.offset,q=i.offset,C=y.s(e)+(E.size-1)/2*y.s(Y),P=j(V.x-F,N.x-m)-C+(V.y<N.y?l:-l),r=new X;return r.add({x:V.x-F,y:V.y+l}),r.add({x:P,y:V.y+l}),r.add({x:P,y:N.y+q}),r.add({x:N.x-m,y:N.y+q}),x&&r.reverse(),g(r,y)},!0),O("extend.east2",function(L,n,s){var c=L.getSourceAgent(),M=L.getTargetAgent(),y=c.getId()>M.getId(),u=y?M:c,H=y?c:M,v=u.p(),N=H.p(),$=R(s,L,u,G),B=R(s,L,H,G,!0),p=L.s(Q),O=p?0:Z(s,u)/2,T=p?0:Z(s,H)/2,U=$.offset,A=B.offset,J=L.s(e)+($.size-1)/2*L.s(Y),z=l(v.x+O,N.x+T)+J+(v.y>N.y?U:-U),V=new X;return V.add({x:v.x+O,y:v.y+U}),V.add({x:z,y:v.y+U}),V.add({x:z,y:N.y+A}),V.add({x:N.x+T,y:N.y+A}),y&&V.reverse(),g(V,L)},!0),O("v.h2",function(E,t,r){return p(E,r,P)},!0),O("h.v2",function(k,E,L){return p(k,L,s)},!0)}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);