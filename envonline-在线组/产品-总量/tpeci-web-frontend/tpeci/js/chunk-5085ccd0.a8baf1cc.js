(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5085ccd0","chunk-2d0e252f","chunk-2d0b2c7c"],{2624:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-card",{attrs:{type:"title",fill:""}},[a("el-form",{staticClass:"mar-t-xs mar-l-sm",attrs:{inline:"",model:e.queryForm}},[a("el-form-item",{attrs:{label:"起止时间："}},[a("el-date-picker",{staticStyle:{width:"140px"},attrs:{type:"date",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",clearable:!1,editable:!1},model:{value:e.queryForm.fromDate,callback:function(t){e.$set(e.queryForm,"fromDate",t)},expression:"queryForm.fromDate"}}),e._v(" ~\n      "),a("el-date-picker",{staticStyle:{width:"140px"},attrs:{type:"date",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",clearable:!1,editable:!1},model:{value:e.queryForm.toDate,callback:function(t){e.$set(e.queryForm,"toDate",t)},expression:"queryForm.toDate"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"fas fa-search"},on:{click:function(t){return e.onQueryList()}}},[e._v("查 询")])],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"fas fa-download",loading:e.downloading},on:{click:e.onDownload}},[e._v("导 出")])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{border:"","highlight-current-row":"",height:"calc(100% - 30px)",data:e.itemList}},[a("el-table-column",{attrs:{align:"center",label:"No.",width:"50",type:"index",index:e.index}}),a("el-table-column",{attrs:{property:"cmdDesc",label:"命令描述","min-width":"280","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{property:"releaseStatus",label:"下发情况","min-width":"120","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{property:"responseStatus",label:"现场应答情况","min-width":"120","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{property:"execState",label:"最终执行情况","min-width":"120","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{property:"addDate",label:"操作时间","min-width":"160","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{property:"addUserName",label:"发送人","min-width":"100","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{property:"portName",label:"排口名称","min-width":"140","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{property:"psName",label:"企业名称","min-width":"200","show-overflow-tooltip":""}})],1),a("paging-query",{attrs:{pager:e.pager},on:{query:e.getItemList}})],1)},s=[],o=(a("8e6e"),a("ac6a"),a("456d"),a("bd86")),i=a("73cb"),m=a("0069"),l=a("90de");function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function n(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(a,!0).forEach((function(t){Object(o["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var d={name:"RemoteRecord",mixins:[i["c"]],props:["portId"],data:function(){return{isAuto:!1,url:"tpeci/remoteControl",queryForm:{fromDate:Object(l["b"])(-2,!1,!1),toDate:Object(l["b"])(0,!1,!1)},downloading:!1}},watch:{portId:function(){this.getItemList()}},methods:{getItemList:function(){var e=this;this.loading=!0;var t=this.pager,a=t.page,r=t.rows;this.$http.post(this.url,n({},this.queryForm,{portId:this.portId}),{params:{page:a,rows:r,sort:"addDate-"}}).then((function(t){200===t.status&&t.data.success?(e.itemList=t.data.data,e.pager.count=t.data.count):e.$message.warning({message:t.data.msg,duration:3e3,showClose:!0})}),(function(e){var t=e.response;Object(m["a"])(t)})).finally((function(){e.loading=!1}))},onDownload:function(){var e=this;this.downloading=!0,this.$http.post("".concat(this.url,"/export?sort=addDate-"),n({},this.queryForm,{portId:this.portId}),{responseType:"blob"}).then((function(t){var a="远程控制".concat((new Date).toLocaleDateString(),".xls");e.$tools.downloadFile(t,a)}),(function(e){var t=e.response;Object(m["a"])(t)})).finally((function(){e.downloading=!1}))}}},u=d,p=a("2877"),y=Object(p["a"])(u,r,s,!1,null,"e7ecad58",null);t["default"]=y.exports},"3ba9":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",{directives:[{name:"resize",rawName:"v-resize"}],staticClass:"fill-h",attrs:{gutter:e.$config.space}},[a("el-col",{staticClass:"pad-r-0",attrs:{span:16}},[a("remote-record",{ref:"remoteRecord",attrs:{portId:e.portInfo.portId}})],1),a("el-col",{staticStyle:{height:"calc(100% + 5px)"},attrs:{span:8}},[a("control-config",{attrs:{portId:e.portInfo.portId},on:{onQuerylist:function(t){return e.onQuerylist()}}})],1)],1)},s=[],o=a("2624"),i=a("7de1"),m={name:"RemoteControl",components:{RemoteRecord:o["default"],ControlConfig:i["default"]},props:{portInfo:{type:Object,default:function(){return{portId:"",protocol:""}}}},data:function(){return{}},methods:{onQuerylist:function(){this.$refs.remoteRecord.onQueryList()}}},l=m,c=a("2877"),n=Object(c["a"])(l,r,s,!1,null,"404042c2",null);t["default"]=n.exports},"7de1":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"fill-h",attrs:{gutter:e.$config.space}},[a("el-col",{attrs:{span:24,h:6}},[a("el-card",{attrs:{type:"title"}},[a("template",{slot:"header"},[e._v("控制命令")]),a("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":e.onTabClick},model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},[a("el-tab-pane",{attrs:{label:"控制命令",name:"valve"}},[a("el-radio-group",{staticClass:"mar-l-sm mar-t-sm",model:{value:e.queryForm.cmdName,callback:function(t){e.$set(e.queryForm,"cmdName",t)},expression:"queryForm.cmdName"}},[a("el-row",[e._l(e.$enum.get("REMOTE_PROYOCOL",e.active).common,(function(t,r){return a("el-col",{key:r,staticClass:"mar-b-sm",attrs:{span:24}},[a("el-radio",{attrs:{label:r}},[e._v(e._s(t))])],1)})),""!==e.queryForm.protocol?a("div",e._l(e.$enum.get("REMOTE_PROYOCOL",e.active)[e.queryForm.protocol],(function(t,r){return a("el-col",{key:r,staticClass:"mar-b-sm",attrs:{span:24}},[a("el-radio",{attrs:{label:r}},[e._v(e._s(t))])],1)})),1):e._e()],2)],1)],1),a("el-tab-pane",{attrs:{label:"数据命令",name:"data"}},[a("el-radio-group",{staticClass:"mar-l-sm mar-t-sm",model:{value:e.queryForm.cmdName,callback:function(t){e.$set(e.queryForm,"cmdName",t)},expression:"queryForm.cmdName"}},[a("el-row",[e._l(e.$enum.get("REMOTE_PROYOCOL",e.active).common,(function(t,r){return a("el-col",{key:r,staticClass:"mar-b-sm",attrs:{span:24}},[a("el-radio",{attrs:{label:r}},[e._v(e._s(t))])],1)})),""!==e.queryForm.protocol?a("div",e._l(e.$enum.get("REMOTE_PROYOCOL",e.active)[e.queryForm.protocol],(function(t,r){return a("el-col",{key:r,staticClass:"mar-b-sm",attrs:{span:24}},[a("el-radio",{attrs:{label:r}},[e._v(e._s(t))])],1)})),1):e._e()],2)],1)],1)],1)],2)],1),a("el-col",{staticClass:"mar-t-xs",attrs:{span:24,h:6}},[a("el-card",{attrs:{type:"title"}},[a("template",{slot:"header"},[e._v("命令设置")]),a("div",{staticClass:"mar-t-xs mar-l-sm"},[a("el-button",{attrs:{type:"success",icon:"fas fa-clipboard-check"},on:{click:e.onSendOder}},[e._v("发送命令")])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"1"===e.queryForm.cmdName,expression:"queryForm.cmdName === '1'"}],staticClass:"mar-t-sm mar-l-sm"},[a("div",[e._v("取总量阈值")]),a("div",{staticClass:"mar-t-xs"},[e._v("提取关阀总量阈值命令")])]),a("div",{directives:[{name:"show",rawName:"v-show",value:"2"===e.queryForm.cmdName,expression:"queryForm.cmdName === '2'"}],staticClass:"mar-t-sm mar-l-sm"},[a("div",[e._v("取浓度阈值")]),a("div",{staticClass:"mar-t-xs"},[e._v("提取关阀浓度阈值命令")])]),a("div",{directives:[{name:"show",rawName:"v-show",value:"3811"===e.queryForm.cmdName,expression:"queryForm.cmdName === '3811'"}],staticClass:"mar-t-sm mar-l-sm"},[a("div",[e._v("远程关阀")]),a("div",{staticClass:"mar-t-xs"},[e._v("远程关阀命令")])]),a("div",{directives:[{name:"show",rawName:"v-show",value:"3812"===e.queryForm.cmdName,expression:"queryForm.cmdName === '3812'"}],staticClass:"mar-t-sm mar-l-sm"},[a("div",[e._v("解除阀门控制")]),a("div",{staticClass:"mar-t-xs"},[e._v("解除阀门控制命令")])]),a("div",{directives:[{name:"show",rawName:"v-show",value:"2881"===e.queryForm.cmdName,expression:"queryForm.cmdName === '2881'"}],staticClass:"mar-t-sm mar-l-sm"},[a("div",[e._v("取阀门动态信息")]),a("div",{staticClass:"mar-t-xs"},[e._v("提取时间段内阀门动态信息")]),a("el-form",{staticClass:"mar-t-xs"},[a("el-form-item",{attrs:{label:"开始时间："}},[a("el-date-picker",{staticStyle:{width:"200px"},attrs:{type:"datetime",format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss",clearable:!1,editable:!1},model:{value:e.cmdParas["2881"].BeginTime,callback:function(t){e.$set(e.cmdParas["2881"],"BeginTime",t)},expression:"cmdParas['2881'].BeginTime"}})],1),a("el-form-item",{attrs:{label:"结束时间："}},[a("el-date-picker",{staticStyle:{width:"200px"},attrs:{type:"datetime",format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss",clearable:!1,editable:!1},model:{value:e.cmdParas["2881"].EndTime,callback:function(t){e.$set(e.cmdParas["2881"],"EndTime",t)},expression:"cmdParas['2881'].EndTime"}})],1)],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"2873"===e.queryForm.cmdName,expression:"queryForm.cmdName === '2873'"}],staticClass:"mar-t-sm mar-l-sm"},[a("div",[e._v("提取报警历史")]),a("div",{staticClass:"mar-t-xs"},[e._v("提取时间段内提取报警历史")]),a("el-form",{staticClass:"mar-t-xs"},[a("el-form-item",{attrs:{label:"开始时间："}},[a("el-date-picker",{staticStyle:{width:"200px"},attrs:{type:"datetime",format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss",clearable:!1,editable:!1},model:{value:e.cmdParas["2873"].BeginTime,callback:function(t){e.$set(e.cmdParas["2873"],"BeginTime",t)},expression:"cmdParas['2873'].BeginTime"}})],1),a("el-form-item",{attrs:{label:"结束时间："}},[a("el-date-picker",{staticStyle:{width:"200px"},attrs:{type:"datetime",format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss",clearable:!1,editable:!1},model:{value:e.cmdParas["2873"].EndTime,callback:function(t){e.$set(e.cmdParas["2873"],"EndTime",t)},expression:"cmdParas['2873'].EndTime"}})],1)],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"2831"===e.queryForm.cmdName,expression:"queryForm.cmdName === '2831'"}],staticClass:"mar-t-sm mar-l-sm"},[a("div",[e._v("取总量日数据")]),a("div",{staticClass:"mar-t-xs"},[e._v("提取时间段内总量历史日数据")]),a("el-form",{staticClass:"mar-t-xs"},[a("el-form-item",{attrs:{label:"开始时间："}},[a("el-date-picker",{staticStyle:{width:"140px"},attrs:{type:"date",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd 00:00:00",clearable:!1,editable:!1},model:{value:e.cmdParas["2831"].BeginTime,callback:function(t){e.$set(e.cmdParas["2831"],"BeginTime",t)},expression:"cmdParas['2831'].BeginTime"}})],1),a("el-form-item",{attrs:{label:"结束时间："}},[a("el-date-picker",{staticStyle:{width:"140px"},attrs:{type:"date",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd 23:59:59",clearable:!1,editable:!1},model:{value:e.cmdParas["2831"].EndTime,callback:function(t){e.$set(e.cmdParas["2831"],"EndTime",t)},expression:"cmdParas['2831'].EndTime"}})],1)],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"2861"===e.queryForm.cmdName,expression:"queryForm.cmdName === '2861'"}],staticClass:"mar-t-sm mar-l-sm"},[a("div",[e._v("取总量小时数据")]),a("div",{staticClass:"mar-t-xs"},[e._v("提取时间段内总量历史小时数据")]),a("el-form",{staticClass:"mar-t-xs"},[a("el-form-item",{attrs:{label:"开始时间："}},[a("el-date-picker",{staticStyle:{width:"160px"},attrs:{type:"datetime",format:"yyyy-MM-dd HH","value-format":"yyyy-MM-dd HH:00:00",clearable:!1,editable:!1},model:{value:e.cmdParas["2861"].BeginTime,callback:function(t){e.$set(e.cmdParas["2861"],"BeginTime",t)},expression:"cmdParas['2861'].BeginTime"}})],1),a("el-form-item",{attrs:{label:"结束时间："}},[a("el-date-picker",{staticStyle:{width:"160px"},attrs:{type:"datetime",format:"yyyy-MM-dd HH","value-format":"yyyy-MM-dd HH:00:00",clearable:!1,editable:!1},model:{value:e.cmdParas["2861"].EndTime,callback:function(t){e.$set(e.cmdParas["2861"],"EndTime",t)},expression:"cmdParas['2861'].EndTime"}})],1)],1)],1)],2)],1)],1)},s=[],o=(a("8e6e"),a("a481"),a("bd86")),i=(a("7f7f"),a("ac6a"),a("456d"),a("768b")),m=a("4161"),l=a("0069");function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function n(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(a,!0).forEach((function(t){Object(o["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var d={name:"ControlConfig",props:["portId"],data:function(){return{loading:!1,queryForm:{cmdName:"3810",portId:"",protocol:1,st:43,cmdParas:{}},portIds:[],factorsList:[],active:"valve",cmdParas:{2881:{BeginTime:Object(m["formatDate"])(new Date,"Y-m-d 00:00:00"),EndTime:Object(m["formatDate"])(new Date,"Y-m-d 23:59:59")},2873:{BeginTime:Object(m["formatDate"])(new Date,"Y-m-d 00:00:00"),EndTime:Object(m["formatDate"])(new Date,"Y-m-d 23:59:59")},2831:{BeginTime:Object(m["formatDate"])(new Date,"Y-m-d 00:00:00"),EndTime:Object(m["formatDate"])(new Date,"Y-m-d 23:59:59")},2861:{BeginTime:Object(m["formatDate"])(new Date,"Y-m-d 00:00:00"),EndTime:Object(m["formatDate"])(new Date,"Y-m-d 00:00:00")},3810:{UT:1},3811:{UT:1},3812:{UT:1},1:{},2:{},1e3:{OverTime:0,ReCount:0}}}},watch:{portId:function(e){this.queryForm.portId=e}},created:function(){this.queryForm.portId=this.portId},methods:{onTabClick:function(e){var t=Object.keys(this.$enum.get("REMOTE_PROYOCOL",e.name).common),a=Object(i["a"])(t,1);this.queryForm.cmdName=a[0]},getFactorsList:function(){var e=this;this.$http.get("cfg/factors/",{params:{page:1,rows:1e5,factorsType:1,category:this.amcsType,sort:"factorCode"}}).then((function(t){200===t.status&&t.data.success&&(e.factorsList=t.data.data)}),(function(e){var t=e.response;Object(l["a"])(t)}))},onSendOder:function(){var e=this;if(this.loading=!0,"2"!==this.queryForm.cmdName&&"1"!==this.queryForm.cmdName){var t=n({},this.queryForm,{cmdParas:n({},this.cmdParas[this.queryForm.cmdName])||{}});t.cmdParas.BeginTime&&(t.cmdParas.BeginTime=t.cmdParas.BeginTime.replace(/\D/g,"")),t.cmdParas.EndTime&&(t.cmdParas.EndTime=t.cmdParas.EndTime.replace(/\D/g,"")),this.$http.post("tpeci/remoteControl/execute",t).then((function(t){200===t.status&&t.data.success?(e.$emit("onQuerylist",t),e.$message.success({message:"发送成功",duration:3e3,showClose:!0})):e.$message.warning({message:t.data.msg,duration:3e3,showClose:!0})}),(function(e){Object(l["a"])(e)})).finally((function(){e.loading=!1}))}else{var a={portId:this.portId,type:this.queryForm.cmdName};this.$http.get("tpeci/valveScheme2Port/extract",{params:n({},a)}).then((function(t){200===t.status&&t.data.success?(e.$emit("onQuerylist",t),e.$message.success({message:"发送成功",duration:3e3,showClose:!0})):e.$message.warning({message:t.data.msg,duration:3e3,showClose:!0})}),(function(e){Object(l["a"])(e)})).finally((function(){e.loading=!1}))}}}},u=d,p=a("2877"),y=Object(p["a"])(u,r,s,!1,null,"45ceca65",null);t["default"]=y.exports}}]);