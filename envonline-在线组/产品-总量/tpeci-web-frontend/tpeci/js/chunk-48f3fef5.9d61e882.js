(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-48f3fef5","chunk-12010a48","chunk-2d0de509","chunk-2d216ede"],{"0b99":function(e,t,r){"use strict";var a=r("4e2d"),o=r.n(a);o.a},"4e2d":function(e,t,r){},5088:function(e,t,r){"use strict";var a=r("c5cd"),o=r.n(a);o.a},"5a5c":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-card",[r("template",{slot:"header"},[r("el-form",{attrs:{model:e.queryForm,inline:""}},[r("el-form-item",{attrs:{label:"关键字："}},[r("el-input",{staticStyle:{width:"180px"},attrs:{placeholder:"企业名称、站点名称",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onQueryList()}},model:{value:e.queryForm.key,callback:function(t){e.$set(e.queryForm,"key",t)},expression:"queryForm.key"}})],1),r("el-form-item",{attrs:{label:"阀门状态："}},[r("el-select",{staticStyle:{width:"90px"},model:{value:e.queryForm.valveStatus,callback:function(t){e.$set(e.queryForm,"valveStatus",t)},expression:"queryForm.valveStatus"}},[r("el-option",{attrs:{label:"全部",value:""}}),e._l(e.$enum.get("VALVE_STATUS"),(function(e,t){return r("el-option",{directives:[{name:"show",rawName:"v-show",value:5!==e.value,expression:"item.value !== 5"}],key:t,attrs:{value:e.value,label:e.label}})}))],2)],1),r("el-form-item",[r("el-button",{attrs:{type:"primary",icon:"fas fa-search"},on:{click:e.onQueryList}},[e._v("查 询")])],1)],1)],1),r("div",{staticClass:"mar-l-sm mar-y-xs",staticStyle:{position:"relative"}},[r("el-button",{attrs:{type:"primary",icon:"fas fa-life-ring",disabled:!e.selectedIds.length},on:{click:function(t){return e.onDeleteItem("3810")}}},[e._v("应急开阀")]),r("el-button",{attrs:{type:"primary",icon:"fas fa-power-off",disabled:!e.selectedIds.length},on:{click:function(t){return e.onDeleteItem("3811")}}},[e._v("应急关阀")]),r("el-button",{attrs:{type:"primary",icon:"fa fa-times-circle",disabled:!e.selectedIds.length},on:{click:function(t){return e.onDeleteItem("3812")}}},[e._v("取消应急")]),r("hint-text",{staticClass:"posion mar-r-sm mar-t-xs fn-clear"},[r("p",[e._v("应急开关阀均属于强制开关状态")])])],1),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{border:"","highlight-current-row":"",height:"calc(100% - 39px)",data:e.itemList,"row-class-name":e.rowClassName},on:{"selection-change":e.onChangeSelected}},[r("el-table-column",{attrs:{align:"center",type:"selection",width:"37"}}),r("el-table-column",{attrs:{align:"center",label:"No.",width:"50",type:"index",index:e.index}}),r("el-table-column",{attrs:{label:"操作",align:"center",width:"67"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"primary",icon:"fas fa-pencil-alt"},on:{click:function(r){return e.onClickEdit(t.row)}}},[e._v("编辑")])]}}])}),r("el-table-column",{attrs:{label:"企业名称",prop:"psName","min-width":"120","show-overflow-tooltip":""}}),r("el-table-column",{attrs:{label:"站点名称",prop:"portName","min-width":"120","show-overflow-tooltip":""}}),r("el-table-column",{attrs:{label:"阀门状态",prop:"valveStatus","min-width":"80","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v("\n        "+e._s(e.$enum.getLabel("VALVE_STATUS",r.valveStatus))+"\n      ")]}}])}),r("el-table-column",{attrs:{label:"控制状态",prop:"controlWay","min-width":"80","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v("\n        "+e._s(e.$enum.getLabel("VALVE_CONTROL_WAY",r.controlWay))+"\n      ")]}}])}),r("el-table-column",{attrs:{label:"最新命令发送时间",prop:"tstamp","min-width":"145","show-overflow-tooltip":""}}),r("el-table-column",{attrs:{label:"最新命令执行结果",prop:"execStatusName","min-width":"145","show-overflow-tooltip":""}})],1),r("valve-info",{ref:"dialog"})],2)},o=[],n=(r("8e6e"),r("ac6a"),r("456d"),r("bd86")),s=r("0069"),l=r("73cb"),i=r("d2f2");function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(r,!0).forEach((function(t){Object(n["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var d={name:"BatchSwitchValve",mixins:[l["c"],l["b"]],components:{valveInfo:i["default"]},data:function(){var e=this.$store.getters["auth/orgGuid"]||"";return{url:"tpeci/batchSwitchValve",isAuto:!0,loading:!1,queryForm:{key:"",valveStatus:"",psId:e,sort:"psName+, portName+"}}},methods:{onChangeSelected:function(e){this.selected=e,this.selectedIds=e.map((function(e){return e.portId}))},onClickEdit:function(e){this.$refs.dialog.openDialog(e)},getItemList:function(){var e=this;this.loading=!0,this.selectedIndexs=[];var t=u({},this.queryForm);this.$http.post(this.url,t).then((function(t){200===t.status&&t.data.success?(e.itemList=t.data.data,e.pager.count=t.data.count):e.$message.warning({message:t.data.msg,duration:3e3,showClose:!0})}),(function(e){var t=e.response;Object(s["a"])(t)})).finally((function(){e.loading=!1}))},onDeleteItem:function(e){var t,r=this;0!==this.selectedIds.length?("3810"===e?t="是否确定执行应急开阀?":"3811"===e?t="是否确定执行应急关阀?":"3812"===e&&(t="是否确定执行取消应急功能?"),this.$confirm(t,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return r.$http.post("".concat(r.url,"/execute"),{portIds:r.selectedIds,cn:e})})).then((function(e){200===e.status&&e.data.success?(r.$message.success({message:"操作成功",duration:3e3,showClose:!0}),r.getItemList()):r.$message.warning({message:e.data.msg,duration:3e3,showClose:!0})}),(function(e){var t=e.response;Object(s["a"])(t)}))):this.$message("请选择需要操作的数据")}}},m=d,p=(r("0b99"),r("2877")),f=Object(p["a"])(m,a,o,!1,null,"3f26c236",null);t["default"]=f.exports},"84b9":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"fill-h",attrs:{gutter:e.$config.space}},[r("el-col",{attrs:{span:24,h:6}},[r("el-card",{attrs:{type:"title"}},[r("template",{slot:"header"},[e._v("控制命令")]),r("el-radio-group",{staticClass:"mar-l-sm mar-t-sm",model:{value:e.queryForm.cn,callback:function(t){e.$set(e.queryForm,"cn",t)},expression:"queryForm.cn"}},[r("el-row",e._l(e.$enum.get("REMOTE_PROYOCOL",e.active).common,(function(t,a){return r("el-col",{key:a,staticClass:"mar-b-sm",attrs:{span:24}},[r("el-radio",{attrs:{label:a}},[e._v(e._s(t))])],1)})),1)],1)],2)],1),r("el-col",{staticClass:"mar-t-xs",attrs:{span:24,h:6}},[r("el-card",{attrs:{type:"title"}},[r("template",{slot:"header"},[e._v("命令设置")]),r("div",{staticClass:"mar-t-xs mar-l-sm"},[r("el-button",{attrs:{type:"success",icon:"fas fa-clipboard-check"},on:{click:e.onSendOder}},[e._v("发送命令")])],1),r("div",{directives:[{name:"show",rawName:"v-show",value:"3810"===e.queryForm.cn,expression:"queryForm.cn === '3810'"}],staticClass:"mar-t-sm mar-l-sm"},[r("div",[e._v("远程开阀")]),r("div",{staticClass:"mar-t-xs"},[e._v("远程开阀命令")])]),r("div",{directives:[{name:"show",rawName:"v-show",value:"3811"===e.queryForm.cn,expression:"queryForm.cn === '3811'"}],staticClass:"mar-t-sm mar-l-sm"},[r("div",[e._v("远程关阀")]),r("div",{staticClass:"mar-t-xs"},[e._v("远程关阀命令")])]),r("div",{directives:[{name:"show",rawName:"v-show",value:"3812"===e.queryForm.cn,expression:"queryForm.cn === '3812'"}],staticClass:"mar-t-sm mar-l-sm"},[r("div",[e._v("解除阀门控制")]),r("div",{staticClass:"mar-t-xs"},[e._v("解除阀门控制命令")])])],2)],1)],1)},o=[],n=(r("8e6e"),r("ac6a"),r("456d"),r("bd86")),s=r("0069");function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(r,!0).forEach((function(t){Object(n["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var c={name:"ControlConfig",props:["portId"],data:function(){return{loading:!1,queryForm:{portIds:[],cn:"3810"},active:"valve"}},created:function(){this.queryForm.portIds=[this.portId]},methods:{onSendOder:function(){var e=this;this.queryForm.portIds=[this.portId],this.$http.post("tpeci/batchSwitchValve/execute",i({},this.queryForm)).then((function(t){200===t.status&&t.data.success?(e.$emit("onQuerylist",t),e.$message.success({message:"发送成功",duration:3e3,showClose:!0})):e.$message.warning({message:t.data.msg,duration:3e3,showClose:!0})}),(function(e){Object(s["a"])(e)})).finally((function(){e.loading=!1}))}}},u=c,d=r("2877"),m=Object(d["a"])(u,a,o,!1,null,"e21e253e",null);t["default"]=m.exports},c50f:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-card",{staticStyle:{"border-top":"1px solid #ebeef5"},attrs:{type:"title",fill:""}},[r("el-form",{staticClass:"mar-t-xs mar-l-sm",attrs:{inline:"",model:e.queryForm}},[r("el-form-item",{attrs:{label:"起止时间："}},[r("el-date-picker",{staticStyle:{width:"140px"},attrs:{type:"date",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd 00:00:00",clearable:!1,editable:!1},model:{value:e.queryForm.fromTime,callback:function(t){e.$set(e.queryForm,"fromTime",t)},expression:"queryForm.fromTime"}}),e._v(" ~\n      "),r("el-date-picker",{staticStyle:{width:"140px"},attrs:{type:"date",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd 23:59:59",clearable:!1,editable:!1},model:{value:e.queryForm.toTime,callback:function(t){e.$set(e.queryForm,"toTime",t)},expression:"queryForm.toTime"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary",icon:"fas fa-search"},on:{click:function(t){return e.onQueryList()}}},[e._v("查 询")])],1)],1),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{border:"","highlight-current-row":"",height:"calc(100% - 30px)",data:e.itemList}},[r("el-table-column",{attrs:{align:"center",label:"No.",width:"50",type:"index",index:e.index}}),r("el-table-column",{attrs:{property:"modifyName",label:"发送人","min-width":"100","show-overflow-tooltip":""}}),r("el-table-column",{attrs:{property:"createDate",label:"操作时间","min-width":"160","show-overflow-tooltip":""}}),r("el-table-column",{attrs:{property:"valveStatus",label:"阀门状态","min-width":"80","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v("\n        "+e._s(e.$enum.getLabel("VALVE_STATUS",""+r.valveStatus))+"\n      ")]}}])}),r("el-table-column",{attrs:{property:"cmdDesc",label:"命令描述","min-width":"280","show-overflow-tooltip":""}}),r("el-table-column",{attrs:{property:"execState",label:"命令执行情况","min-width":"120"}})],1),r("paging-query",{attrs:{pager:e.pager},on:{query:e.getItemList}})],1)},o=[],n=(r("8e6e"),r("ac6a"),r("456d"),r("bd86")),s=r("73cb"),l=r("0069"),i=r("90de");function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(r,!0).forEach((function(t){Object(n["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var d={name:"RemoteRecord",mixins:[s["c"]],props:["portId"],data:function(){return{url:"tpeci/oriSend",queryForm:{cnList:["3810","3811","3812"],fromTime:Object(i["b"])(-2,!0,!1),toTime:Object(i["b"])(0,!0,!0)},status:["下发中","执行成功","执行失败"],downloading:!1}},methods:{getItemList:function(){var e=this;this.loading=!0;var t=this.pager,r=t.page,a=t.rows;this.$http.post(this.url,u({},this.queryForm,{portId:this.portId}),{params:{page:r,rows:a,sort:"createDate-"}}).then((function(t){200===t.status&&t.data.success?(e.itemList=t.data.data,e.pager.count=t.data.count):e.$message.warning({message:t.data.msg,duration:3e3,showClose:!0})}),(function(e){var t=e.response;Object(l["a"])(t)})).finally((function(){e.loading=!1}))}}},m=d,p=r("2877"),f=Object(p["a"])(m,a,o,!1,null,"38da6244",null);t["default"]=f.exports},c5cd:function(e,t,r){},d2f2:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("dialog-modal",{ref:"dialog",staticClass:"table-dialog table-fill-h dialog-body-fill-h",attrs:{scrollbar:"",type:"title",size:"large",title:"开关阀详情"}},[r("el-row",{directives:[{name:"resize",rawName:"v-resize"}],staticClass:"fill-h pad-b-sm",attrs:{gutter:e.$config.space}},[r("el-col",{staticClass:"pad-r-0",attrs:{span:16}},[r("remote-record",{ref:"remoteRecord",attrs:{portId:e.portId}})],1),r("el-col",{attrs:{span:8}},[r("control-config",{attrs:{portId:e.portId},on:{onQueryList:e.onQueryList}})],1)],1)],1)},o=[],n=r("c50f"),s=r("84b9"),l={name:"RemoteControl",components:{RemoteRecord:n["default"],ControlConfig:s["default"]},data:function(){return{portId:""}},methods:{openDialog:function(e){var t=this;this.portId=e.portId,this.$refs.dialog.openDialog(),this.$nextTick((function(){t.onQueryList()}))},onQueryList:function(){this.$refs.remoteRecord.onQueryList()}}},i=l,c=(r("5088"),r("2877")),u=Object(c["a"])(i,a,o,!1,null,null,null);t["default"]=u.exports}}]);