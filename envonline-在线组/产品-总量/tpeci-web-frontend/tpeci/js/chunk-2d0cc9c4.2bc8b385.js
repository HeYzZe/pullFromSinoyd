(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0cc9c4"],{"4f51":function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("dialog-modal",{ref:"dialog",attrs:{size:"middle",appendToBody:"",title:""+t.title},on:{close:t.closeDialog}},[i("div",{ref:"factor",staticStyle:{height:"55vh",width:"100%"}})])},r=[],a=(i("8e6e"),i("a481"),i("456d"),i("ac6a"),i("768b")),n=i("bd86"),s=i("0069"),c=i("4161");function l(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,o)}return i}function p(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?l(i,!0).forEach((function(e){Object(n["a"])(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):l(i).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var d={data:function(){return{title:"报警因子数据曲线",itemModel:{},chartList:[],options:{}}},computed:{legend:function(){return this.options.legend},xAxis:function(){return this.options.xAxis},series:function(){return this.options.series}},watch:{},mounted:function(){},methods:{openDialog:function(t){this.options=this.getEmptyItem(),this.itemModel=p({},t),this.$refs.dialog.openDialog(),this.options.title.text=this.itemModel.factorName,this.options.series.markLine.data[0].yAxis=this.itemModel.upperValue,this.getDataCurve()},drawEcharts:function(){var t=this.$echarts.init(this.$refs.factor);t.clear(),t.setOption(this.options),window.addEventListener("resize",(function(){t.resize()}))},getDataCurve:function(){var t=this,e=this.getFormatDate(this.itemModel.alarmTstamp),i=Object(a["a"])(e,2),o=i[0],r=i[1];this.$http.post("amcs/dataCurve",{portId:this.itemModel.portId,factorCodes:[this.itemModel.factorCode],portType:this.itemModel.portType,dataType:"Hour",fromTime:o,toTime:r}).then((function(e){200===e.status&&e.data.success&&(t.chartList=e.data.data,Object.keys(t.chartList).forEach((function(e){"XData"===e?t.options.xAxis[0].data=t.chartList[e]:(t.options.series.name=t.itemModel.factorName,t.options.series.data=t.chartList[e])})),t.$nextTick((function(){t.drawEcharts()})))}),(function(t){var e=t.response;Object(s["a"])(e)}))},getFormatDate:function(t){var e=new Date(t.replace(/-/g,"/")).getTime(),i=(new Date).getTime(),o=new Date,r=new Date;return o.setTime(e-432e5),r.setTime(e+432e5),r>i&&(r=i),r=new Date(r),[Object(c["formatDate"])(o,"Y-m-d H:i:s"),Object(c["formatDate"])(r,"Y-m-d H:i:s")]},closeDialog:function(){this.chartList=[],this.itemModel={}},getEmptyItem:function(){return{tooltip:{trigger:"axis",axisPointer:{type:"cross",crossStyle:{color:"#999"}}},dataZoom:[{type:"inside"}],grid:{left:"75",right:"50",top:"60",bottom:"100"},title:{text:"",align:"center",x:"center",y:"10"},xAxis:[{type:"category",data:[],axisLabel:{formatter:function(t){return"{value|".concat(t,"}")},rotate:45,margin:10,rich:{value:{align:"right"}}}}],yAxis:[{type:"value",name:"浓度（mg/m³）",axisLabel:{formatter:"{value}"}}],series:{name:"",type:"line",data:[],showSymbol:!1,markLine:{silent:!0,data:[{yAxis:""}],symbol:"none",lineStyle:{color:"#B03A5B"}},itemStyle:{color:"#63a0d7"}}}}}},u=d,m=i("2877"),h=Object(m["a"])(u,o,r,!1,null,null,null);e["default"]=h.exports}}]);